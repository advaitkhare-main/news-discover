name: Update RSS News
on:
  schedule: [{cron: '0 * * * *'}]
  workflow_dispatch:

jobs:
  fetch:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    
    - name: Fetch RSS â†’ JSON
      id: fetch
      uses: chrisreddington/rss-parser@v1.0.2
      with:
        rss-url: |
          https://feeds.feedburner.com/ndtvnews-latest
          https://feeds.bbci.co.uk/news/rss.xml
          https://venturebeat.com/category/ai/feed/
          https://economictimes.indiatimes.com/markets/rssfeeds/1977021501.cms
          https://www.espncricinfo.com/rss/content/story/feeds/0.xml
        output-file: docs/news.json
    
    - name: Commit if changed
      run: |
        git config user.name github-actions[bot]
        git config user.email 41898282+github-actions[bot]@users.noreply.github.com
        git add docs/news.json
        git diff --staged --quiet || git commit -m "ðŸ¤– $(date)" && git push
